<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Calendar</title>
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div class="container">

    <div class="calendar-container">

      <header>
        <div class="day" id="header-day">18</div>
        <div class="month" id="header-month">August</div>
      </header>

      <table class="calendar">
        <thead>
          <tr>
            <td>Mon</td>
            <td>Tue</td>
            <td>Wed</td>
            <td>Thu</td>
            <td>Fri</td>
            <td>Sat</td>
            <td>Sun</td>
          </tr>
        </thead>
        <tbody id="calendar-body">
          <!-- Filled dynamically by JavaScript -->
        </tbody>
      </table>

      <div class="ring-left"></div>
      <div class="ring-right"></div>

    </div> <!-- end calendar-container -->

  </div> <!-- end container -->

  <script>
    (function () {
      const monthNames = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];

      const today = new Date();
      const currentYear = today.getFullYear();
      const currentMonth = today.getMonth(); // 0–11
      const todayDate = today.getDate();

      const headerDayEl = document.getElementById("header-day");
      const headerMonthEl = document.getElementById("header-month");
      const calendarBody = document.getElementById("calendar-body");

      // Set header to today's real date
      headerDayEl.textContent = todayDate;
      headerMonthEl.textContent = monthNames[currentMonth];

      function renderCalendar(year, month) {
        // Clear any existing rows
        calendarBody.innerHTML = "";

        // Month info
        const firstOfMonth = new Date(year, month, 1);
        const lastOfMonth = new Date(year, month + 1, 0);
        const daysInMonth = lastOfMonth.getDate();

        // Previous month info (for leading days)
        const lastOfPrevMonth = new Date(year, month, 0);
        const daysInPrevMonth = lastOfPrevMonth.getDate();

        // JS getDay(): 0 (Sun)–6 (Sat)
        // Our calendar starts on Monday, so convert:
        const rawFirstWeekday = firstOfMonth.getDay(); // 0–6
        const startIndex = (rawFirstWeekday + 6) % 7;  // 0 (Mon)–6 (Sun)

        const totalCells = startIndex + daysInMonth;
        const rows = Math.ceil(totalCells / 7);

        let currentDay = 1; // for this month

        for (let row = 0; row < rows; row++) {
          const tr = document.createElement("tr");

          for (let col = 0; col < 7; col++) {
            const cellIndex = row * 7 + col;
            const td = document.createElement("td");

            if (cellIndex < startIndex) {
              // Leading days from previous month
              const prevDay = daysInPrevMonth - (startIndex - 1 - cellIndex);
              td.textContent = prevDay;
              td.classList.add("prev-month");
            } else if (currentDay > daysInMonth) {
              // Trailing days from next month
              const nextDay = currentDay - daysInMonth;
              td.textContent = nextDay;
              td.classList.add("next-month");
              currentDay++;
            } else {
              // Actual days of current month
              td.textContent = currentDay;

              if (
                year === today.getFullYear() &&
                month === today.getMonth() &&
                currentDay === todayDate
              ) {
                td.classList.add("current-day");
              }

              currentDay++;
            }

            tr.appendChild(td);
          }

          calendarBody.appendChild(tr);
        }
      }

      // Render current month on load
      renderCalendar(currentYear, currentMonth);
    })();
  </script>
</body>

</html>
